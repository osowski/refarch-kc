{"componentChunkName":"component---src-pages-demo-readme-mdx","path":"/demo/readme/","result":{"pageContext":{"frontmatter":{"title":"Demo Script","description":"Demo Script"},"relativePagePath":"/demo/readme.mdx","titleType":"append","MdxNode":{"id":"20001684-3d31-5c7b-915c-effd6734053e","children":[],"parent":"92e0700c-21bb-5b95-8846-f04fed9b978f","internal":{"content":"---\ntitle: Demo Script\ndescription: Demo Script\n---\n\nThis demo script is using the localhost deployment with a mapping of the host name kcsolution to localhost defined in the `/etc/hosts` file. For IBM Cloud change the hostname accordingly. \n\nHere is how to execute the business process step by step using the demonstration APIs and some scripts. \n\n## Pre-requisites\n\nSet the following IP address - hostname mapping:\n\n* Hostname `kcsolution` to map to localhost when running on local computer\n\n## Step 1: Manufacturer create an order:\n\n* Go to the http://kcsolution:3110 URL to access the demonstration home page:\n\n![kc-home](kc-home.png)\n\nThis page presents the simple version of the business process and the user interface tiles that can be used to simulate the progression within this business process. The grey shadowed tiles have not implemented logic. \n\nFrom the `Initiate Orders - Manufacturer` we can have the manufacturer creating a new fresh product order to ship over sea.\n\nTo represent different manufacturers the first select box is used to support different scenarios in the future. 'GoodManuf' should be used. \n\n![](kc-manuf-select.png)\n\nOnce the manufacturer is selected a list of existing orders may be displayed. You can add order with the UI, but you can also use a script in the order command microservice project: https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/master/order-command-ms/scripts/createOrder.sh\n\nBelow is an example of how to use the createOrder script to add a 'GoodManuf's' order to book a voyage from Oakland to Shanghai for a fresh product:\n```\n./createOrder.sh localhost:10080 ./orderOacklandToChinaCreate.json\n\n```\n\n![](kc-orders.png)\n\n> There is a lot happening here. The Angular is getting orders using the [orders.service.ts](https://github.com/ibm-cloud-architecture/refarch-kc-ui/blob/master/ui/src/app/features/orders/orders.service.ts) service within the BFF component at the address: `http://localhost:3010/api/orders`.  \nThe BFF is calling the [Order Query Microservice](https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/tree/master/order-query-ms) via a javascript client code: [getOrders(manuf) function.](https://github.com/ibm-cloud-architecture/refarch-kc-ui/blob/4b9d7d1241eaeeaee7fc01247a35b696f0b6d5b2/server/routes/OrderClient.ts#L12-L25). The Order Query microservice URL is defined in environment variable or defaulted in the config file. It is mapped to the deployed Order service. (e.g. http://ordercmd:9080/orders)\n\nSelecting one order using the `Arrow` icon, allow the user to view the order details:\n\n![](kc-order.png)\n\nAs illustrated in the CQRS diagram:\n\nthe creation of the order goes to the [order command microservice](https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/tree/master/order-command-ms) which publishes a `OrderCreated` event to the `orders` topic and then consumes it to persist the data to its database. See [source code here](https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/6de424c443c05262ae013620f5f11b4a1b2e6f90/order-command-ms/src/main/java/ibm/labs/kc/order/command/service/OrderCRUDService.java#L51-L74)\n\n\nIf you plug a 'orders topic' consumer you can see the following trace with the status of the order being `pending` and the type of event being `OrderCreated`. \n\n```json\n{\"payload\":{\n    \"orderID\":\"1fcccdf2-e29d-4b30-8e52-8116dc2a01ff\",\n    \"productID\":\"Carrot\",\n    \"customerID\":\"GoodManuf\",\n    \"quantity\":10000,\n    \"pickupAddress\": \"...\",\n    \"expectedDeliveryDate\":\"2019-03-31T13:30Z\",\n    \"status\":\"pending\"},\n\"type\":\"OrderCreated\",\n\"version\":\"1\"}\n\n```\n\n## Step 2: K Container Shipment Manager looking at Orders\n\nFrom the home page goes to the Shipment Inc tile:\n\n![](shipment-inc.png) \n\nThen the home page lists the current order the shipment company received\n\n![](kc-shipment-home.png)\n\nThe status of those events will be modified over time while the order is processed down stream by the voyage and container services. The following sequence diagram illustrates the flow:\n\n![](kc-order-seq-diag.png)  \n\nLooking at the traces in the voyage service\n```\nvoyages_1     |  emitting {\"timestamp\":1548788544290,\"type\":\"OrderAssigned\",\"version\":\"1\",\"payload\":{\"voyageID\":100,\"orderID\":\"1fcccdf2-e29d-4b30-8e52-8116dc2a01ff\"}}\n```\n\nor at the `orders` topic:\n\n```json\n{\"timestamp\":1548792921679,\n\"type\":\"OrderAssigned\",\"version\":\"1\",\n\"payload\":{\"voyageID\":100,\"orderID\":\"1fcccdf2-e29d-4b30-8e52-8116dc2a01ff\"}}\n\n```\n\n## Step3: Simulate the ship in blue water\n\nFrom the home page, select the `Simulate the bluewater` tile. In the main page, select one of the available fleet. As of now, only the North Pacific has data:\n\n![](kc-fleet-select.png)  \n\nThe fleet panel lists the boats, their location and status and a map:\n\n![](kc-fleet-home.png)  \n\nSelecting one boat with the edit button, goes to the boat detail view:\n\n![](kc-ship-detail.png)  \n\nYou can start a simulation on the ship movement by selecting one of three pre-defined scenarios:\n\n* Fire affecting some containers\n* Reefer down\n* Boat experiencing a heat wave\n\n![](kc-ship-scenarios.png)  \n\nThe command is sent to the Simulator and the boat will start to move and generate container metrics:\n\n![](boat-with-issues.png)  \n\nThe simulation implementation is yet not completed. \n\n\n\n","type":"Mdx","contentDigest":"0c44baf90fc95ca15428efe1a9864859","counter":264,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Demo Script","description":"Demo Script"},"exports":{},"rawBody":"---\ntitle: Demo Script\ndescription: Demo Script\n---\n\nThis demo script is using the localhost deployment with a mapping of the host name kcsolution to localhost defined in the `/etc/hosts` file. For IBM Cloud change the hostname accordingly. \n\nHere is how to execute the business process step by step using the demonstration APIs and some scripts. \n\n## Pre-requisites\n\nSet the following IP address - hostname mapping:\n\n* Hostname `kcsolution` to map to localhost when running on local computer\n\n## Step 1: Manufacturer create an order:\n\n* Go to the http://kcsolution:3110 URL to access the demonstration home page:\n\n![kc-home](kc-home.png)\n\nThis page presents the simple version of the business process and the user interface tiles that can be used to simulate the progression within this business process. The grey shadowed tiles have not implemented logic. \n\nFrom the `Initiate Orders - Manufacturer` we can have the manufacturer creating a new fresh product order to ship over sea.\n\nTo represent different manufacturers the first select box is used to support different scenarios in the future. 'GoodManuf' should be used. \n\n![](kc-manuf-select.png)\n\nOnce the manufacturer is selected a list of existing orders may be displayed. You can add order with the UI, but you can also use a script in the order command microservice project: https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/master/order-command-ms/scripts/createOrder.sh\n\nBelow is an example of how to use the createOrder script to add a 'GoodManuf's' order to book a voyage from Oakland to Shanghai for a fresh product:\n```\n./createOrder.sh localhost:10080 ./orderOacklandToChinaCreate.json\n\n```\n\n![](kc-orders.png)\n\n> There is a lot happening here. The Angular is getting orders using the [orders.service.ts](https://github.com/ibm-cloud-architecture/refarch-kc-ui/blob/master/ui/src/app/features/orders/orders.service.ts) service within the BFF component at the address: `http://localhost:3010/api/orders`.  \nThe BFF is calling the [Order Query Microservice](https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/tree/master/order-query-ms) via a javascript client code: [getOrders(manuf) function.](https://github.com/ibm-cloud-architecture/refarch-kc-ui/blob/4b9d7d1241eaeeaee7fc01247a35b696f0b6d5b2/server/routes/OrderClient.ts#L12-L25). The Order Query microservice URL is defined in environment variable or defaulted in the config file. It is mapped to the deployed Order service. (e.g. http://ordercmd:9080/orders)\n\nSelecting one order using the `Arrow` icon, allow the user to view the order details:\n\n![](kc-order.png)\n\nAs illustrated in the CQRS diagram:\n\nthe creation of the order goes to the [order command microservice](https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/tree/master/order-command-ms) which publishes a `OrderCreated` event to the `orders` topic and then consumes it to persist the data to its database. See [source code here](https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/6de424c443c05262ae013620f5f11b4a1b2e6f90/order-command-ms/src/main/java/ibm/labs/kc/order/command/service/OrderCRUDService.java#L51-L74)\n\n\nIf you plug a 'orders topic' consumer you can see the following trace with the status of the order being `pending` and the type of event being `OrderCreated`. \n\n```json\n{\"payload\":{\n    \"orderID\":\"1fcccdf2-e29d-4b30-8e52-8116dc2a01ff\",\n    \"productID\":\"Carrot\",\n    \"customerID\":\"GoodManuf\",\n    \"quantity\":10000,\n    \"pickupAddress\": \"...\",\n    \"expectedDeliveryDate\":\"2019-03-31T13:30Z\",\n    \"status\":\"pending\"},\n\"type\":\"OrderCreated\",\n\"version\":\"1\"}\n\n```\n\n## Step 2: K Container Shipment Manager looking at Orders\n\nFrom the home page goes to the Shipment Inc tile:\n\n![](shipment-inc.png) \n\nThen the home page lists the current order the shipment company received\n\n![](kc-shipment-home.png)\n\nThe status of those events will be modified over time while the order is processed down stream by the voyage and container services. The following sequence diagram illustrates the flow:\n\n![](kc-order-seq-diag.png)  \n\nLooking at the traces in the voyage service\n```\nvoyages_1     |  emitting {\"timestamp\":1548788544290,\"type\":\"OrderAssigned\",\"version\":\"1\",\"payload\":{\"voyageID\":100,\"orderID\":\"1fcccdf2-e29d-4b30-8e52-8116dc2a01ff\"}}\n```\n\nor at the `orders` topic:\n\n```json\n{\"timestamp\":1548792921679,\n\"type\":\"OrderAssigned\",\"version\":\"1\",\n\"payload\":{\"voyageID\":100,\"orderID\":\"1fcccdf2-e29d-4b30-8e52-8116dc2a01ff\"}}\n\n```\n\n## Step3: Simulate the ship in blue water\n\nFrom the home page, select the `Simulate the bluewater` tile. In the main page, select one of the available fleet. As of now, only the North Pacific has data:\n\n![](kc-fleet-select.png)  \n\nThe fleet panel lists the boats, their location and status and a map:\n\n![](kc-fleet-home.png)  \n\nSelecting one boat with the edit button, goes to the boat detail view:\n\n![](kc-ship-detail.png)  \n\nYou can start a simulation on the ship movement by selecting one of three pre-defined scenarios:\n\n* Fire affecting some containers\n* Reefer down\n* Boat experiencing a heat wave\n\n![](kc-ship-scenarios.png)  \n\nThe command is sent to the Simulator and the boat will start to move and generate container metrics:\n\n![](boat-with-issues.png)  \n\nThe simulation implementation is yet not completed. \n\n\n\n","fileAbsolutePath":"/home/runner/work/refarch-kc/refarch-kc/docs-gatsby/src/pages/demo/readme.mdx"}}}}