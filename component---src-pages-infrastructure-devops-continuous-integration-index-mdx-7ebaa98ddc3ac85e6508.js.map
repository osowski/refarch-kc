{"version":3,"sources":["webpack:///./src/pages/infrastructure/devops-continuous-integration/index.mdx"],"names":["name","_frontmatter","PageDescription","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-infrastructure-devops-continuous-integration-index-mdx-7ebaa98ddc3ac85e6508.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/refarch-kc/refarch-kc/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst PageDescription = makeShortcode(\"PageDescription\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <PageDescription mdxType=\"PageDescription\">\nThe implemented DevOps pipelines for the Reefer Container Shipment solution reference implementation of the Event-Driven Reference Architecture. This chapter focuses on the <strong>Continuous Integration</strong> capability implemented in the reference implementation.\n    </PageDescription>\n    <h1>{`Overview`}</h1>\n    <p>{`Our `}<a parentName=\"p\" {...{\n        \"href\": \"#continuous-integration\"\n      }}>{`Continuous Integration (CI) approach`}</a>{`, `}<em parentName=\"p\">{`the topic of this chapter`}</em>{`, is one of “zero-infrastructure overhead”. To accomplish this goal, we utilize `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/features/actions\"\n      }}>{`GitHub Actions`}</a>{` to build and push a microservice’s associated container images to `}<a parentName=\"p\" {...{\n        \"href\": \"https://hub.docker.com/u/ibmcase\"\n      }}>{`Docker Hub`}</a>{` for public consumption. The GitHub Actions workflows are defined in the owning repository’s `}<inlineCode parentName=\"p\">{`.github/workflows/dockerbuild.yaml`}</inlineCode>{` file.`}</p>\n    <p>{`Our `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-gitops\"\n      }}>{`GitOps approach`}</a>{` focuses on a single-repository, environment-per-subdirectory model which can be forked and cloned to replicate deployments to other clusters and environments. The reference implementation utilizes `}<a parentName=\"p\" {...{\n        \"href\": \"https://kustomize.io/\"\n      }}>{`Kustomize`}</a>{` as its templating technology to utilize the `}<inlineCode parentName=\"p\">{`app-deploy.yaml`}</inlineCode>{` files, provided by each individual microservice, as a base and then layer in environment-specific configuration and credentials as needed.`}</p>\n    <p>{`Our `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-continuous-delivery/\"\n      }}>{`Continuous Delivery (CD) approach`}</a>{` focuses on a GitOps-based delivery model, using a GitHub repository as a single source of truth for the deployment, management, and operations of our running application components. In this model, we have the flexibility to use multiple open-source technologies to apply the single source of truth from a given GitHub repository onto a desired cluster environment.`}</p>\n    <h1>{`Continuous integration`}</h1>\n    <p>{`The continuous integration workflow for our project is detailed figure below:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"715px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"44.09722222222222%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAhOAAAITgGMMQDsAAABcklEQVQoz31S2UoDQRDc7/SP/AW/QEFQUBDxzSeRJIqEHBKJm5iDJHvv7Nxb9s6uuRQbZnqYo6q6pj1Q2LKsEozWYIxBU66iOxjh6voGJZ0v1xEmgUTEDIyhYS32o2wwvBqshKE5Exr+dI405+5wOBrj7v7BAXytIpzeLnDxnMAahelsgSCKEScJOOdbUI9Ljcf3HMN5jsnEx8dkjoSJA/YgYQgzhpzVD1utNjovr9CkpRAKSleqa8VekEqcnI1x/rTCzB+h1x/AX2wglSZGC0ulicPq8NbtuXtVbUJICFmDOkBBNJ3Bki58QkoOLg0W6xBJmrkHlQplXT2uJGsbv4kozXKyJwcr+HbfM7QwBJQkMTZhRGUVKLdaLIIgwDqMDz/g6EP2P8arpgq0YtgpKDGODC77Au25cmUr8kg3PpWN2uPhFP4sdix1DguD3kpiFgsoJamVDPlkD1rkr/B+sbjcIFN7CGqJLGfgZL5pfPoP8BuH1rmMHW6NeAAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"CI main\",\n        \"title\": \"CI main\",\n        \"src\": \"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/8895e/ci-main.png\",\n        \"srcSet\": [\"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/7fc1e/ci-main.png 288w\", \"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/a5df1/ci-main.png 576w\", \"/refarch-kc/static/90f1a657de33e3edad0dadfaab570cb0/8895e/ci-main.png 715w\"],\n        \"sizes\": \"(max-width: 715px) 100vw, 715px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <p>{`On the left side, the developer uses their environment with Appsody CLI to build and test the code. Once tests have run successfully, they commit and push the code to the master branch, which triggers the GitHub Actions workflow. For the walkthrough of our CI process, we will be using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/tree/master/order-command-ms\"\n      }}>{`Order Command`}</a>{` microservice as our reference point.`}</p>\n    <h2>{`Step 1 - Validate Docker Secrets`}</h2>\n    <p>{`The first job in each GitHub Actions workflow, `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/master/.github/workflows/dockerbuild.yaml#L11-L53\"\n        }}>{`validate-docker-secrets`}</a></strong>{`, ensures that all the necessary Secrets are defined on the repository under which the build action is running. Similar to Kubernetes Secrets, `}<a parentName=\"p\" {...{\n        \"href\": \"https://help.github.com/en/actions/automating-your-workflow-with-github-actions/creating-and-using-encrypted-secrets\"\n      }}>{`GitHub Repository Secrets`}</a>{` allow you to store encrypted, sensitive information in a programmatically accessible way.`}</p>\n    <p>{`Here is an example of such secret definitions:`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"55.90277777777778%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABkklEQVQoz12Si5aCMAxE+f//XHFRofT9gtlJAPWsxzltIJnepAyzTfidE+6vhGlJ+HkEjK/MfUbK5VCpyNQVy342FtZ5+JAQYtI1poyhFCbkrKq1IoaAGAMCVymOTM5iIvt0FEmOXRa01rAD6NuGUhta7xjEaF1XbHy4y1v+DOPVWsY7OpMObZpzad+6GooEypiVexoWUi3GkCSqgcgwnqYJ4/2O2+2G2zji+Xzq84VkUmxs1BrnnK69N4UZJJDkg/BAdD5gerxI6ZFSQWCbIeajXSqVRpGQ1KptRyWdtD4ktjxNj7ehKJaMpzOYwwqbw6ewH7OSA32IOuMrji7oaIZCQ3vO61LdmFQ9TLFILSv1RS8HB5rJBYmBxFJfaLopIVuWG72S1bBX2ELDbNlG18u6DpPLuQzbeVnO+4+h3NCyGO3/TXgarsVxz2F/GwphPA3bQegJVHw8CfliHO9vSikqNBS6ORkOvH8Z4kMYk34ycoDjB14oNfyenc6JfyFc8qqU27/3MjchEtNaD0Pvw7vlP63BWt8bTY92AAAAAElFTkSuQmCC')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Gihub Secrets\",\n        \"title\": \"Gihub Secrets\",\n        \"src\": \"/refarch-kc/static/35ce7cd8c912b6439083436e131a85b5/3cbba/github-secrets.png\",\n        \"srcSet\": [\"/refarch-kc/static/35ce7cd8c912b6439083436e131a85b5/7fc1e/github-secrets.png 288w\", \"/refarch-kc/static/35ce7cd8c912b6439083436e131a85b5/a5df1/github-secrets.png 576w\", \"/refarch-kc/static/35ce7cd8c912b6439083436e131a85b5/3cbba/github-secrets.png 1152w\", \"/refarch-kc/static/35ce7cd8c912b6439083436e131a85b5/b00f0/github-secrets.png 1286w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h2>{`Step 2 - Build Component Images`}</h2>\n    <p>{`The majority of the microservices that comprise the Reefer Container Shipment solution reference implementation are built using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev\"\n      }}>{`Appsody`}</a>{` open-source project. While each microservice is free to choose its own specific technology for implementation via `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev/docs/stacks/stacks-overview\"\n      }}>{`Appsody Stacks`}</a>{`, each component can be easily built in any given environment by issuing the `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev/docs/using-appsody/building-and-deploying\"\n      }}><inlineCode parentName=\"a\">{`appsody build`}</inlineCode>{` commands`}</a>{`.`}</p>\n    <p>{`The second job in each component microservice’s workflow, `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://appsody.dev/docs/using-appsody/building-and-deploying\"\n        }}>{`build-docker-image`}</a></strong>{`, runs on a base Ubuntu container image, creates a new semantically-versioned tag `}<em parentName=\"p\">{`(in the form of `}<inlineCode parentName=\"em\">{`0.1.2`}</inlineCode>{`)`}</em>{` for the repository, installs the latest Appsody CLI tools, performs the `}<inlineCode parentName=\"p\">{`appsody build`}</inlineCode>{` command with the `}<a parentName=\"p\" {...{\n        \"href\": \"https://appsody.dev/docs/using-appsody/building-and-deploying#building-your-runtime-docker-image-with-appsody\"\n      }}>{`appropriate parameters`}</a>{`, tags the newly created version-specific image with `}<inlineCode parentName=\"p\">{`latest`}</inlineCode>{` as well, and pushes the image with both tags to the public Docker Hub repository defined by the aforementioned repository secrets.`}</p>\n    <span {...{\n      \"className\": \"gatsby-resp-image-wrapper\",\n      \"style\": {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\",\n        \"maxWidth\": \"1152px\"\n      }\n    }}>{`\n      `}<span parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-background-image\",\n        \"style\": {\n          \"paddingBottom\": \"43.05555555555555%\",\n          \"position\": \"relative\",\n          \"bottom\": \"0\",\n          \"left\": \"0\",\n          \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQoz62R3UrEMBCFcyl4qaAX4p0g+A6+peIPgj+v4jvsurq7thVBcZdN2iZN2uQ4k9qyK9QrBz5OJjNzGBJxeJPi4CrF6UO2yX2GE6ptnSXYPt9k9zLBDnORYP86xdFthuO7DHt0FlMVMJEe8zzglZiplnkOvJCOVgFj2eroRyeynWGeiGfq494xnQUQwDFd1Xh8d5TWKJRCpUugoTzW/S8dDtH4EJs+tcdMNvDew1gXsa6Greuorml69SEMIvDPIZxzqCqLt2WBD6lhtIGl7WrazLkWzgehebeG0GRQlhp5nkPR2y0WS9IcRVnSXRFrnen6YJfzMuzREQ2tpUtjoAqNL6UhpYqmhu54aCgCvRnPGVP1REM+8GfwJpV1fXOnXPsLnu98vgFXZaZF3FFOlAAAAABJRU5ErkJggg==')\",\n          \"backgroundSize\": \"cover\",\n          \"display\": \"block\"\n        }\n      }}></span>{`\n  `}<img parentName=\"span\" {...{\n        \"className\": \"gatsby-resp-image-image\",\n        \"alt\": \"Docker hub repository\",\n        \"title\": \"Docker hub repository\",\n        \"src\": \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/3cbba/dockerhub-repo.png\",\n        \"srcSet\": [\"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/7fc1e/dockerhub-repo.png 288w\", \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/a5df1/dockerhub-repo.png 576w\", \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/3cbba/dockerhub-repo.png 1152w\", \"/refarch-kc/static/dc1fe8e2fb0f8fd5b59bc2df364151ae/c63e3/dockerhub-repo.png 1290w\"],\n        \"sizes\": \"(max-width: 1152px) 100vw, 1152px\",\n        \"style\": {\n          \"width\": \"100%\",\n          \"height\": \"100%\",\n          \"margin\": \"0\",\n          \"verticalAlign\": \"middle\",\n          \"position\": \"absolute\",\n          \"top\": \"0\",\n          \"left\": \"0\"\n        },\n        \"loading\": \"lazy\"\n      }}></img>{`\n    `}</span>\n    <h2>{`Step 3 - Update GitOps`}</h2>\n    <p>{`The final job, `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-order-ms/blob/master/.github/workflows/dockerbuild.yaml#L119-L153\"\n        }}>{`update-gitops`}</a></strong>{`, is the linkage to our `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-gitops/\"\n      }}>{`GitOps implementation`}</a>{`, which is publicly available via `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ibm-cloud-architecture/refarch-kc-gitops\"\n      }}>{`ibm-cloud-architecture/refarch-kc-gitops`}</a>{`.`}</p>\n    <p>{`This step updates the `}<inlineCode parentName=\"p\">{`app-deploy.yaml`}</inlineCode>{` file in every environment subdirectory in the GitOps repository, where there is an instance of the `}<inlineCode parentName=\"p\">{`order-command-ms`}</inlineCode>{` microservice. The update is performed via a standard `}<inlineCode parentName=\"p\">{`git commit`}</inlineCode>{` process, as this allows for a visible audit trail of environment management and operations updates - one of the key advantages of the GitOps approach!`}</p>\n    <p>{`This is an effective brute-force method of updating the external GitOps repository, as the `}<inlineCode parentName=\"p\">{`app-deploy.yaml`}</inlineCode>{` file is updated when the Continuous Integration pipeline performs an `}<a parentName=\"p\" {...{\n        \"href\": \"#step-2-build-component-images\"\n      }}><inlineCode parentName=\"a\">{`appsody build`}</inlineCode></a>{` and matches the image that was pushed to the external container registry. As such, any updates made directly to any file matching the `}<inlineCode parentName=\"p\">{`/services/ordercommandms/base/config/app-deploy.yaml`}</inlineCode>{` file pattern in the `}<inlineCode parentName=\"p\">{`refarch-kc-gitops`}</inlineCode>{` repository would be overwritten by this pipeline run.`}</p>\n    <h1>{`Next steps`}</h1>\n    <p><em parentName=\"p\">{`For details on how the GitOps repository is structured and how to create your own environment definitions,`}</em>{` reference the peer `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-gitops/\"\n      }}>{`GitOps Environments`}</a>{` chapter of this manual.`}</p>\n    <p><em parentName=\"p\">{`For details on how the Continuous Delivery implementation leverages the GitOps artifacts,`}</em>{` reference the peer `}<a parentName=\"p\" {...{\n        \"href\": \"/refarch-kc/infrastructure/devops-continuous-delivery/\"\n      }}>{`Continuous Delivery (CD)`}</a>{` chapter of this manual.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}